#!/usr/bin/env ruby

require 'lib/crisp'

if ARGV.size == 0
  buffer = ''

  loop do
    print ">> " if buffer.empty?
    buffer << gets

    if ast = CrispParser.new.parse(buffer)
      puts "=> " + Crisp::Runtime.new(ast).run.to_s
      buffer = ''
    else
      print "?> "
    end
  end
elsif ARGV.size == 1
  raise "running crisp files is currently not supported"
else
  puts "to many args"
end
